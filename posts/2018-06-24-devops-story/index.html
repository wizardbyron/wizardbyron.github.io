<!doctype html><html lang=zh class=dark><head>
<meta charset=utf-8>
<meta http-equiv=content-language content="zh">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>采用 DevOps 故事落地 DevOps &#183; 顾宇的博客</title>
<meta name=title content="采用 DevOps 故事落地 DevOps &#183; 顾宇的博客">
<meta name=description content>
<link rel=canonical href=https://wwww.guyu.me/posts/2018-06-24-devops-story/>
<link type=text/css rel=stylesheet href=/css/schemes/slate.min.1fa9cfe6ea431f51b6669ad59d531a840711f25edf67f90d0227253371e1da49fdcc25506150e39fb99ac2c95a6012b2c4bbdd6c41b841b186419cbd7e115768.css integrity="sha512-H6nP5upDH1G2ZprVnVMahAcR8l7fZ/kNAiclM3Hh2kn9zCVQYVDjn7mawslaYBKyxLvdbEG4QbGGQZy9fhFXaA==">
<link type=text/css rel=stylesheet href=/css/compiled/main.min.4076b9cf114dd23cca017f3365e2205a4c9a4b2c0ef4193ccd08883f76e554aa40f674a8f6e77a1b2895be0975ba8e019b0c59996c2eea32e4970ca4d5221653.css integrity="sha512-QHa5zxFN0jzKAX8zZeIgWkyaSywO9Bk8zQiIP3blVKpA9nSo9ud6GyiVvgl1uo4BmwxZmWwu6jLklwyk1SIWUw==">
<script>function loadPreferredAppearance(){localStorage.preferredAppearance==="dark"||!("preferredAppearance"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function setPreferredAppearance(a){a=="default"?localStorage.removeItem("preferredAppearance"):localStorage.preferredAppearance=a,loadPreferredAppearance()}loadPreferredAppearance(),window.matchMedia("(prefers-color-scheme: dark)").addListener(loadPreferredAppearance)</script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<meta property="og:title" content="采用 DevOps 故事落地 DevOps">
<meta property="og:description" content="在 2009 年第一届 DevOpsDays 上，《敏捷教练》的作者 Rachel Davies 作为第一届 DevOpsDays 上的第一位分享嘉宾。分享了在 BBC 采用用户故事跟踪非功能需求的经验。然而这一实践并不如 DevOps 的其">
<meta property="og:type" content="article">
<meta property="og:url" content="https://wwww.guyu.me/posts/2018-06-24-devops-story/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2018-06-24T00:00:00+00:00">
<meta property="article:modified_time" content="2018-06-24T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="采用 DevOps 故事落地 DevOps">
<meta name=twitter:description content="在 2009 年第一届 DevOpsDays 上，《敏捷教练》的作者 Rachel Davies 作为第一届 DevOpsDays 上的第一位分享嘉宾。分享了在 BBC 采用用户故事跟踪非功能需求的经验。然而这一实践并不如 DevOps 的其">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","articleSection":"Posts","name":"采用 DevOps 故事落地 DevOps","headline":"采用 DevOps 故事落地 DevOps","description":"在 2009 年第一届 DevOpsDays 上，《敏捷教练》的作者 Rachel Davies 作为第一届 DevOpsDays 上的第一位分享嘉宾。分享了在 BBC 采用用户故事跟踪非功能需求的经验。然而这一实践并不如 DevOps 的其","inLanguage":"zh","author":{"@type":"Person","name":"顾宇"},"creator":{"@type":"Person","name":"顾宇"},"copyrightHolder":"顾宇","copyrightYear":"2018","dateCreated":"2018-06-24T00:00:00\u002b00:00","datePublished":"2018-06-24T00:00:00\u002b00:00","dateModified":"2018-06-24T00:00:00\u002b00:00","url":"https:\/\/wwww.guyu.me\/posts\/2018-06-24-devops-story\/","wordCount":"4296","keywords":["DevOps 故事"]}</script>
<meta name=generator content="Hugo 0.90.1">
<meta name=author content="顾宇">
<link href=https://linkedin.com/in/wizardbyron rel=me>
<link href=https://github.com/wizardbyron rel=me>
</head>
<body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-800 dark:text-neutral">
<div>
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" rel=me href=/>顾宇的博客</a>
</div>
<nav>
<ul class="flex flex-col list-none sm:flex-row">
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/ title>主页</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/posts/ title=Posts>博客</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/categories/ title=Categories>分类</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/tags/ title=Tags>标签</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/talks/ title=演讲和分享>演讲和分享</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/about/ title=关于我>关于我</a>
</li>
</ul>
</nav>
</header>
<main class=flex-grow>
<article class=max-w-prose>
<header>
<h1 class="mt-0 text-4xl font-extrabold text-neutral-800 dark:text-neutral">
采用 DevOps 故事落地 DevOps
</h1>
<div class="mt-8 mb-12 text-base text-neutral-400 dark:text-neutral-500">
<div class="flex flex-row items-center">
<time datetime="2018-06-24 00:00:00 +0000 UTC">24 June 2018</time><span class="px-2 text-primary-500">&#183;</span><span title=预计阅读>9 分钟</span><span class="px-2 text-primary-500">&#183;</span>
<span class=mb-[2px]>
<a href=https://github.com/wizardbyron/wizardbyron.github.io/tree/main/content/posts/2018-06-24-devops-story.md class="text-lg hover:text-primary-500" rel="noopener noreferrer" target=_blank title=编辑内容>
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="edit" class="svg-inline--fa fa-edit fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1.0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7.0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174 402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7-43.2-43.2c-4.1-4.1-10.8-4.1-14.8.0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"/></svg>
</span>
</a>
</span>
</div>
</div>
</header>
<section class="prose dark:prose-light">
<p>在 2009 年第一届 DevOpsDays 上，《敏捷教练》的作者 Rachel Davies 作为第一届 DevOpsDays 上的第一位分享嘉宾。分享了在 BBC 采用用户故事跟踪非功能需求的经验。然而这一实践并不如 DevOps 的其它实践那样广泛。这个实践实际上很简单，就是把非功能需求做为用户故事的 AC 放入故事卡里。</p>
<p>在我过去实践 DevOps 的经历里，发现每次开始的时候都需要团队做同样的一些事情。而这些事情往往是和用户故事独立的，不能作为用户的一部分体现在工作量里。但这些事情又提升了团队之间的 DevOps 能力，于是，我把这一类的工作固化为 DevOps 故事用来落地 DevOps 实践，而且 DevOps 故事同样遵循并体现 CLAMS 原则的。</p>
<p>所谓 CLAMS 原则，指的是：</p>
<blockquote>
<p>Culture（文化）
Lean（精益）
Automated （自动化）
Measurement （度量）
Sharing （分享/共担责任）</p>
</blockquote>
<p>我把一个团队是否遵循 CLAMS 原则当做是否正确实践 DevOps 的标准之一。</p>
<p>DevOps 故事由 DevOps Epic （DevOps 史诗）和 DevOps Story （DevOps 故事）组成。和用户故事对应，DevOps 史诗故事可以依据具体情况的不同拆分成不同的 DevOps 故事。</p>
<p>而无论 DevOps 史诗 还是 DevOps 故事，都包含以下三个因素：</p>
<ol>
<li>
<p>一定包含 Dev 和 Ops 两个方面</p>
</li>
<li>
<p>一定包含 Dev 和 Ops 核查的内容</p>
</li>
<li>
<p>一定包含可以度量的内容</p>
</li>
</ol>
<h2 id=编写-devops-史诗故事>编写 DevOps 史诗故事 <a class=heading-anchor href=#%e7%bc%96%e5%86%99-devops-%e5%8f%b2%e8%af%97%e6%95%85%e4%ba%8b aria-label=锚点>#</a></h2>
<p>DevOps 史诗故事对于大部分组织来说是类似的，因为这些场景是 DevOps 的核心特征。也就是说，当你的团队完成了 DevOps 史诗故事。那么，你的团队就可以被称作是 DevOps 团队。</p>
<p>一个 DevOps 的史诗故事格式如下：</p>
<blockquote>
<p>作为一个 DevOps 团队
应该采用*&lt;某一种 DevOps 实践>*
团队中的Dev*&lt;应该如何做>*
团队中的Ops*&lt;应该如何做>*
得到&lt;什么样的结果>
可以获得*&lt;什么益处><em>，从</em>&lt;某一度量指标>*中得到。</p>
</blockquote>
<h3 id=举例1持续部署流水线>举例1：持续部署流水线 <a class=heading-anchor href=#%e4%b8%be%e4%be%8b1%e6%8c%81%e7%bb%ad%e9%83%a8%e7%bd%b2%e6%b5%81%e6%b0%b4%e7%ba%bf aria-label=锚点>#</a></h3>
<blockquote>
<p>作为一个 DevOps 的团队，
应该采用 <strong>持续部署流水线</strong>
团队中的 Dev <strong>提交代码后</strong>
团队中的 QA <strong>可以根据需要部署相应版本</strong>
团队中的 Ops <strong>无需操作</strong>
<strong>就可以看到应用部署在生产环境上</strong>
可以 <strong>提升交付速度</strong>，通过<strong>部署时间</strong>度量
可以 <strong>提升反馈速度</strong>，通过<strong>部署频率</strong>度量
可以 <strong>节约 Ops 的部署时间</strong>，通过 <strong>Lead Time</strong> 度量</p>
</blockquote>
<h3 id=举例2基础设施即代码>举例2：基础设施即代码 <a class=heading-anchor href=#%e4%b8%be%e4%be%8b2%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd%e5%8d%b3%e4%bb%a3%e7%a0%81 aria-label=锚点>#</a></h3>
<p>作为一个 DevOps 的团队，</p>
<p>应该采用 <strong>基础设施即代码</strong></p>
<p>团队中的 Dev <strong>用代码构建和生产环境开发环境</strong></p>
<p>团队中的 Ops <strong>需要通过代码和配置构建基础设施</strong></p>
<p>就可以 <strong>看到应用部署在生产环境上</strong></p>
<p>可以 <strong>提升交付速度</strong>，通过<strong>部署时间</strong>度量</p>
<p>可以 <strong>提升反馈速度</strong>，通过<strong>部署频率</strong>度量</p>
<p>可以 <strong>节约时间</strong>，通过 <strong>Lead Time</strong> 度量</p>
<p>可以 <strong>减少人为变更失误次数和变更失败次数</strong></p>
<p><strong>以上的两个例子中，都包含了 DevOps 史诗故事的几个原则</strong>:</p>
<p>首先，DevOps 作为一个团队属性，放在第一行标识了出来。这是为了<strong>向团队强调 DevOps 的概念</strong>。</p>
<p>其次，需要注明 DevOps 所采用的最佳实践，在这里，最佳实践是不需要有具体的实施工具的。具体的实施工具要在 DevOps 故事里体现。</p>
<p>然后，下来的几行包含了各个角色要达成的效果，以及最终的效果。这里体现了 CLAMS 里 Culture 和 Share （分担）的原则。</p>
<p>最后，要标明 DevOps 史诗故事带来的益处以及度量方法。这里体现了 CLAMS 里的 Measurement 原则。</p>
<p>然而，仅仅有了 DevOps 史诗故事是没有办法落地的，我们还需要更加具体的 DevOps 故事来辅助。</p>
<h2 id=编写-devops-故事>编写 DevOps 故事 <a class=heading-anchor href=#%e7%bc%96%e5%86%99-devops-%e6%95%85%e4%ba%8b aria-label=锚点>#</a></h2>
<p>DevOps 故事的原则要比 DevOps 史诗更加具体，并分成两种不同的故事。一种叫做“给 Dev 的 DevOps 故事”（DevOps Story for Dev），另一种叫做“给 Ops 的 DevOps 故事”（DevOps Story for Ops）。两者的格式相同， 但内容不同。</p>
<p>DevOps 故事的编写原则如下：</p>
<ol>
<li>
<p>只包含某单一角色</p>
</li>
<li>
<p>和某一史诗故事关联</p>
</li>
<li>
<p>包含所用 具体技术和最佳实践</p>
</li>
<li>
<p>完成的效果</p>
</li>
<li>
<p>可以自动化 (可选)</p>
</li>
<li>
<p>要有 AC，定义什么算完成。</p>
</li>
</ol>
<p>DevOps 故事的格式如下：</p>
<blockquote>
<p>作为 DevOps 团队里的 &lt;角色>
要实现 &lt;某一 DevOps 史诗故事>
要采用 &lt;什么工具> 完成 &lt;什么事情>
对 &lt;另一角色> 带来什么好处</p>
</blockquote>
<p>例如，对于上文的持续部署流水线的 DevOps 史诗故事就可能会有以下几个 DevOps 故事组成：</p>
<h3 id=devops-故事1>DevOps 故事1 <a class=heading-anchor href=#devops-%e6%95%85%e4%ba%8b1 aria-label=锚点>#</a></h3>
<blockquote>
<p>作为 DevOps 团队里的 <strong>Ops</strong>
要实践<strong>持续部署流水线</strong>
我<strong>需要采用 Jenkins 作为持续集成服务器管理持续部署</strong>
让 <strong>Dev 提交的代码可以通过持续部署流程</strong>
让 <strong>QA 可以部署到测试环境上验证功能</strong>
<strong>验收条件：</strong></p>
<ol>
<li>有 jenkins 服务器对应的 URL</li>
<li>有 每个用户的用户名和密码</li>
<li>Lead Dev 具有管理权限和配置权限</li>
<li>其它 Dev 具有执行权限</li>
<li>QA 有部署在测试环境和生产环境上的权限</li>
</ol>
</blockquote>
<h2 id=devops-故事2>DevOps 故事2 <a class=heading-anchor href=#devops-%e6%95%85%e4%ba%8b2 aria-label=锚点>#</a></h2>
<blockquote>
<p>作为 DevOps 团队里的 <strong>Ops</strong>
要实践<strong>持续部署流水线</strong>
我<strong>需要采用 Gitlab 作为代码仓库，提交代码。</strong>
让 <strong>Dev 可以提交代码。</strong>
<strong>验收条件：</strong></p>
<ol>
<li>采用<strong>自动化</strong>的方式创建一个 Gitlab 服务器。</li>
<li>在 Gitlab 上创建一个代码库。</li>
<li>给 Jenkins 配置对应的访问权限。</li>
</ol>
</blockquote>
<h2 id=devops-故事3>DevOps 故事3 <a class=heading-anchor href=#devops-%e6%95%85%e4%ba%8b3 aria-label=锚点>#</a></h2>
<blockquote>
<p>作为 DevOps 团队里的 <strong>Dev</strong>
要<strong>实践持续部署流水线</strong>
我<strong>需要用 git 提交代码并实现 单一主干发布分支</strong>
让 <strong>Ops 通过 Master 分支发布</strong>
让 <strong>Dev 在开发分支上开发</strong>
让 <strong>QA 可以选择对应的提交进行部署测试</strong>
<strong>验收条件：</strong></p>
<ol>
<li>创建一个 Jenkins Job，跟踪代码库 Master 分支的变化</li>
<li>Master 分支如果有变化，<strong>自动</strong>立即构建并部署到开发环境。</li>
<li>测试环境和生产环境不能直接部署。</li>
</ol>
</blockquote>
<p>通过以上三个 DevOps 故事，我们可以看出：<strong>完成一个 DevOps 史诗故事是需要不同角色的共同参与的，而且每个角色都能通过自己的 DevOps 故事让其它团队成员获益</strong>。此外，在以上三个 DevOps 故事中，都包含了 DevOps 故事的几个原则：</p>
<ol>
<li>
<p>一个 DevOps 故事有且只有一个角色执行。</p>
</li>
<li>
<p>和 DevOps 史诗故事一致，对应的度量指标和 DevOps 史诗故事也一致。</p>
</li>
<li>
<p>包含具体工具和具体工具的实践。</p>
</li>
<li>
<p>包含对其它团队成员的操作指引。</p>
</li>
<li>
<p>虽然并不是每一个 DevOps 故事都可以自动化，但是自动化是需要第一考虑的因素。</p>
</li>
</ol>
<h2 id=用-devops-故事塑造-devops-文化>用 DevOps 故事塑造 DevOps 文化 <a class=heading-anchor href=#%e7%94%a8-devops-%e6%95%85%e4%ba%8b%e5%a1%91%e9%80%a0-devops-%e6%96%87%e5%8c%96 aria-label=锚点>#</a></h2>
<p>通过以上例子你可以感觉到，DevOps 故事实际上就是一个 DevOps 实践的落地说明。它采用 史诗故事确立了 DevOps 的文化和原则。有用具体的 故事 指导每个成员的技术实践。通过每日站会，我们在不断通过重复和强化每个人对 DevOps 文化和原则的认识。</p>
<p>有人曾经说文化无法落地和改变，这句话说对了一半。</p>
<p>作为 《DevOps Handbook》 的合著者之一，以及 DevOps 的早期布道者。 John Willis 的 “DevOps Culture（Part1）” 这篇文章里，引用了 一句话：</p>
<blockquote>
<p>“You can’t directly change culture. But you can change behavior, and behavior becomes culture”</p>
</blockquote>
<p>翻译过来就是：<strong>你无法直接改变文化，但是你可以改变行为，行为会演变成文化。</strong></p>
<p>DevOps 故事就是通过类似于用户故事的方式将 DevOps 的相关行为可视化并落地的一个方法。这也给 Scrum Master 和敏捷教练一个指导团队落地 DevOps 的工具。</p>
<h2 id=正确的认识和使用-devops-故事>正确的认识和使用 DevOps 故事 <a class=heading-anchor href=#%e6%ad%a3%e7%a1%ae%e7%9a%84%e8%ae%a4%e8%af%86%e5%92%8c%e4%bd%bf%e7%94%a8-devops-%e6%95%85%e4%ba%8b aria-label=锚点>#</a></h2>
<h3 id=devops-也有-invest-原则>DevOps 也有 INVEST 原则 <a class=heading-anchor href=#devops-%e4%b9%9f%e6%9c%89-invest-%e5%8e%9f%e5%88%99 aria-label=锚点>#</a></h3>
<p>DevOps 故事源于我在学习用户故事（User Story）中受到的启发。而用户故事中最重要的原则就是，INVEST 原则，它们分别是以下六个单词的缩写：</p>
<blockquote>
<p><strong>Independent</strong>：独立的
<strong>Negotiable</strong>：可讨论的
<strong>Valuable</strong>：有价值的
<strong>Estimateable</strong>：可估计的
<strong>Small</strong>：小的
<strong>Testable</strong>：可测试的</p>
</blockquote>
<p>DevOps 故事和 用户故事都满足 INVEST 原则。然而，这六个原则在 DevOps 的上下文里则需要一点补充和解释：</p>
<ol>
<li>
<p>由于 DevOps 故事的价值不是最终用户（End-User），因此所有的原则是对内部用户（Internal User）讨论的。Internal User 包括团队里的 Dev、Ops、BA、QA、UX、PM 等等角色。</p>
</li>
<li>
<p>对于 Independent （独立的）原则而言，在用户故事的上下文里，是要避免故事间的相互依赖。但在 DevOps 故事里，是指角色独立。也就是说，每个角色所做的事情是独立的。但是这些角色之间的故事可能是相关，甚至是依赖的，我们需要对这样的 DevOps 故事按照依赖关系排列优先级。</p>
</li>
<li>
<p>对于 Negotiable （可讨论）原则而言，在用户故事的上下文里，是对功能的简短描述，细节将在客户和开发团队的讨论中产生。但是在 DevOps 故事里，是指最终达成 DevOps 的效果是依据团队的构成不同可讨论的，目的是要让 DevOps 在团队资源能力水平合适的方式下落地，而不是提出一个无法达到的要求。此外，DevOps 史诗故事是对 DevOps 落地的简要描述，而 DevOps 故事是对 DevOps 落地的详细描述，在 DevOps 史诗故事中，可以讨论的余地并不多，它代表了某一种最佳实践，而这样一种最佳实践是有上下文的。而 DevOps 故事，则是某一种最佳实践的具体落地，团队可以讨论商议具体的落地内容。比如：对于没有 Github 访问条件团队，我们可以讨论用 Gitlab 服务器。如果团队不会用 git ，可以讨论使用 SVN 或者 CVS。而对于 DevOps 史诗故事来说，这些细节是无关紧要的。</p>
</li>
<li>
<p>对于 Valueble (有价值）原则而言，这个价值体现在两个方面：一个方面是对最终用户的价值，被称之为外部价值，这点和用户故事是一致的。另外一个方面是对团队的内部价值，这里是要在编写 DevOps 史诗故事和 DevOps 故事的时候就要明确的。每一个具体的实践对某一具体的角色提供了什么价值。</p>
</li>
<li>
<p>对于 Small（小的）原则而言，这里的控制维度是按 AC 的可完成性而言，如果每一个 AC 都是通过讨论可以明确完成的，这样的 DevOps 故事就是小的，而跟时间无关。和用户故事相同的地方是，如果某一个 DevOps 故事因为不确定而复杂，可以将它分成两个故事：一个做调研的故事和一个完成的故事。这里需要强调注意的是，调研故事必须有进度产出。举个例子，如果 DevOps 故事的内容是要做监控管理，团队不清楚应该用哪种工具或者框架。我们就需要一个调研工具的 DevOps 故事，而这样一个调研故事，是需要每天，甚至每半天要有产出分享的。这是遵照了 CLAMS 里的 Share（分享）原则。因此，在 DevOps 上下文里，<strong>分享不是一个可选项，是一个必选项。</strong></p>
</li>
<li>
<p>对于 Testable（可测试）原则而言，测试是每个角色的职责，这体现了 CLAMS 原则的 Share（共担）原则，而不仅仅是最终用户。和用户故事相同的地方在于：无论什么时候，只要有可能，就要把测试自动化，这也体现了 CLAMS 原则里的 Automation（自动化）原则。</p>
</li>
</ol>
<h3 id=devops-故事不同于技术卡technical-card>DevOps 故事不同于技术卡（Technical Card） <a class=heading-anchor href=#devops-%e6%95%85%e4%ba%8b%e4%b8%8d%e5%90%8c%e4%ba%8e%e6%8a%80%e6%9c%af%e5%8d%a1technical-card aria-label=锚点>#</a></h3>
<p>有些读者可能会发现 DevOps 故事有点像某些项目里的技术卡。但它们有以下几点不同：</p>
<ol>
<li>
<p>DevOps 故事更强调团队对 DevOps 文化和原则的落地。而技术卡强调是某一技术的创建或者变更。</p>
</li>
<li>
<p>DevOps 故事中的技术是手段，目的是最佳实践。而技术卡可以是仅仅是技术工具本身。</p>
</li>
<li>
<p>DevOps 故事中强调技术对团队的价值。而技术卡可以不用考虑这一点。</p>
</li>
</ol>
<h3 id=devops-故事不同于非功能需求non-function-requirements>DevOps 故事不同于非功能需求（Non-Function Requirements） <a class=heading-anchor href=#devops-%e6%95%85%e4%ba%8b%e4%b8%8d%e5%90%8c%e4%ba%8e%e9%9d%9e%e5%8a%9f%e8%83%bd%e9%9c%80%e6%b1%82non-function-requirements aria-label=锚点>#</a></h3>
<p>DevOps 故事不同于非功能需求主要是面向用户不同：DevOps 故事是对于应用交付团队或者内部用户（Internal User）的。而非功能需求是针对于引用最终用户（End-User）的。因此，它们的关系也不一样。用户故事是应用功能的一部分。而 DevOps 故事是和应用功能无关的。</p>
<h3 id=请用-clams-原则和-invest-原则校正你的-devops-故事>请用 CLAMS 原则和 INVEST 原则校正你的 DevOps 故事 <a class=heading-anchor href=#%e8%af%b7%e7%94%a8-clams-%e5%8e%9f%e5%88%99%e5%92%8c-invest-%e5%8e%9f%e5%88%99%e6%a0%a1%e6%ad%a3%e4%bd%a0%e7%9a%84-devops-%e6%95%85%e4%ba%8b aria-label=锚点>#</a></h3>
<p>当你开始编写 DevOps 故事的时候，可能会出现一些问题，这不要紧。你需要编写 DevOps 故事之前，要牢记 CLAMS 原则。当你举棋不定时，团队是最好的答案来源，因为 DevOps 是关于团队本身，而不是终端用户的事情。不过当你开始咨询团队的意见之前，请和团队达成 CLAMS 原则的共识，在这样的共识之下，做出什么样的 DevOps 故事都会通过度量和反馈机制来衡量效果。</p>
<p>此外，DevOps 故事的 INVEST 原则也可以帮助你更好的实践 DevOps 故事。我采用 DevOps 故事作为落地 DevOps 的方法的时间和案例始终都很有限，还有更多未知的情况等待区处理。但我始终不忘用 CLAMS 原则去审视它。如果你发现有无法处理的状况，欢迎来信和我一起讨论，并形成新的 DevOps 实践。</p>
</section>
<footer class=pt-8>
<div class=flex>
<img class="w-24 h-24 !mt-0 !mb-0 mr-4 rounded-full" src=/img/author.jpg>
<div class=place-self-center>
<div class="text-[0.6rem] leading-3 text-neutral-400 dark:text-neutral-500 uppercase">
作者
</div>
<div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
顾宇
</div>
<div class="text-sm text-neutral-700 dark:text-neutral-400">Stand Alone CompleX</div>
<div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/wizardbyron target=_blank alt=Linkedin rel="me noopener noreferrer">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span>
</a>
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/wizardbyron target=_blank alt=Github rel="me noopener noreferrer">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
</a>
</div>
</div>
</div>
<div class="pt-8 article-pagination">
<hr class="border-dotted border-neutral-300 dark:border-neutral-600">
<div class="flex justify-between pt-3">
<span>
<a class=flex href=/posts/2018-07-07-why-do-i-write-wade/>
<span class="mr-3 article-pagination-direction">&larr;</span>
<span class="flex flex-col">
<span class="article-pagination-title mt-[0.1rem] leading-6">一怒之下，我又写了一个开源流量测试工具</span>
<span class="mt-[0.1rem] text-xs text-neutral-400 dark:text-neutral-500">
<time datetime="2018-07-07 00:00:00 +0000 UTC">7 July 2018</time>
</span>
</span>
</a>
</span>
<span>
<a class="flex text-right" href=/posts/2018-06-12-tdd-in-nginx/>
<span class="flex flex-col">
<span class="article-pagination-title mt-[0.1rem] leading-6">测试驱动开发 Nginx 配置</span>
<span class="mt-[0.1rem] text-xs text-neutral-400 dark:text-neutral-500">
<time datetime="2018-06-12 00:00:00 +0000 UTC">12 June 2018</time>
</span>
</span>
<span class="ml-3 article-pagination-direction">&rarr;</span>
</a>
</span>
</div>
</div>
</footer>
</article>
</main><footer class=py-10>
<div class="flex justify-between">
<div>
<p class="text-sm text-neutral-400 dark:text-neutral-500">
&copy;
2021
顾宇
</p>
<p class="text-xs text-neutral-300 dark:text-neutral-600">
由 <a class="hover:underline hover:underline-primary-300 hover:text-primary-400" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:underline-primary-300 hover:text-primary-400" href=https://git.io/hugo-congo target=_blank rel="noopener noreferrer">Congo</a> 强力驱动
</p>
</div>
<div class="text-sm cursor-pointer text-neutral-400 dark:text-neutral-500">
<button id=dark-toggle onclick="setPreferredAppearance('dark')" oncontextmenu="return setPreferredAppearance('default'),!1" class="inline px-2 py-1 border rounded-md border-neutral-200 dark:hidden hover:text-primary-500 hover:border-primary-400" title=切换为深色模式>
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" class="svg-inline--fa fa-moon fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M283.211 512c78.962.0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954.0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156.0 00283.211.0c-141.309.0-256 114.511-256 256 0 141.309 114.511 256 256 256z"/></svg>
</span>
</button>
<button id=light-toggle onclick="setPreferredAppearance('light')" oncontextmenu="return setPreferredAppearance('default'),!1" class="hidden px-2 py-1 border rounded-md cursor-pointer dark:inline border-neutral-700 hover:text-primary-400 hover:border-primary-500" title=切换为浅色模式>
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" class="svg-inline--fa fa-sun fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 160c-52.9.0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6.0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0s-49.9-131.1.0-181 131.1-49.9 181 0 49.9 131.1.0 181z"/></svg>
</span>
</button>
</div>
</div>
</footer>
</body>
</html>